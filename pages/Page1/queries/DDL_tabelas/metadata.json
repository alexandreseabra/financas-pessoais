{
  "gitSyncId": "67ef2d06dbf6d0457d74b2f8_0dd8e653-f919-42bf-9cb2-ceb95054b7c3",
  "id": "Page1_DDL_tabelas",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "-- Tabela Categoria\nCREATE TABLE categoria (\n  id SERIAL PRIMARY KEY,\n  tipo VARCHAR(10) CHECK (tipo IN ('despesa', 'receita')),\n  nome VARCHAR(100) NOT NULL,\n  icone VARCHAR(50),\n  cor VARCHAR(20),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Tabela Conta\nCREATE TABLE conta (\n  id SERIAL PRIMARY KEY,\n  tipo VARCHAR(50),  -- Pode ser 'corrente', 'poupança', etc.\n  descricao TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Tabela Cartao (associado a uma conta)\nCREATE TABLE cartao (\n  id SERIAL PRIMARY KEY,\n  conta_id INT REFERENCES conta(id),\n  limite NUMERIC(10,2),\n  dia_fechamento INT,\n  dia_vencimento INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Tabela Tag\nCREATE TABLE tag (\n  id SERIAL PRIMARY KEY,\n  nome VARCHAR(50) UNIQUE,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Tabela Transacao\nCREATE TABLE transacao (\n  id SERIAL PRIMARY KEY,\n  data_transacao DATE NOT NULL,\n  descricao TEXT,\n  categoria_id INT REFERENCES categoria(id),\n  conta_id INT,       -- Pode ser nulo se a transação for via cartão\n  cartao_id INT,      -- Pode ser nulo se a transação for via conta\n  valor NUMERIC(10,2) NOT NULL,\n  ignorar BOOLEAN DEFAULT FALSE,\n  observacao TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT fk_conta_cartao CHECK (\n    (conta_id IS NOT NULL AND cartao_id IS NULL) OR \n    (conta_id IS NULL AND cartao_id IS NOT NULL)\n  )\n);\n\n-- Tabela Associativa Transacao_Tag (para relação muitos-para-muitos)\nCREATE TABLE transacao_tag (\n  transacao_id INT REFERENCES transacao(id),\n  tag_id INT REFERENCES tag(id),\n  PRIMARY KEY (transacao_id, tag_id)\n);",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "db-financas-pessoas",
      "isAutoGenerated": false,
      "name": "db-financas-pessoas",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [],
    "executeOnLoad": false,
    "name": "DDL_tabelas",
    "pageId": "Page1",
    "userSetOnLoad": false
  }
}